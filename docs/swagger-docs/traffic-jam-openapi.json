{"openapi":"3.0.0","info":{"title":"Traffic Jam API","version":"1.0.0"},"servers":[{"url":"http://localhost:8082"}],"tags":[{"name":"Traffic Jam API","description":"API for traffic jam"},{"name":"City API","description":"API for city"},{"name":"Street API","description":"API for streets"},{"name":"District API","description":"API for district"}],"paths":{"/api/locations/traffics/{trafficId}":{"put":{"tags":["Traffic Jam API"],"summary":"Update traffic jam by id and street id","operationId":"updateTrafficJam","parameters":[{"name":"trafficId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrafficJamModifyRequestDto"}}},"required":true},"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"400":{"description":"Bad request (validation exceptions)","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"404":{"description":"Not found, for example - element not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"201":{"description":"Successful update","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SuccessfullyOperationResponseDto"}}}}}},"delete":{"tags":["Traffic Jam API"],"summary":"Delete traffic jam by id and street id","operationId":"deleteTrafficJam","parameters":[{"name":"trafficId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"201":{"description":"Successful deletion","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SuccessfullyOperationResponseDto"}}}}}}},"/api/locations/streets/{id}":{"put":{"tags":["Street API"],"summary":"Update street by id","operationId":"updateStreet","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int32"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StreetRequestDto"}}},"required":true},"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"400":{"description":"Bad request (validation exceptions)","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"404":{"description":"Not found, for example - element not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"201":{"description":"Successful update","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SuccessfullyOperationResponseDto"}}}}}},"delete":{"tags":["Street API"],"summary":"Delete street by id","operationId":"deleteStreet","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"201":{"description":"Successful deletion","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SuccessfullyOperationResponseDto"}}}}}}},"/api/locations/districts/{id}":{"put":{"tags":["District API"],"summary":"Update district by id","operationId":"updateDistrict","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int32"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DistrictRequestDto"}}},"required":true},"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"400":{"description":"Bad request (validation exceptions)","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"404":{"description":"Not found, for example - element not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"201":{"description":"Successful update","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SuccessfullyOperationResponseDto"}}}}}},"delete":{"tags":["District API"],"summary":"Delete district by id","operationId":"deleteDistrict","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"201":{"description":"Successful deletion","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SuccessfullyOperationResponseDto"}}}}}}},"/api/locations/cities/{id}":{"put":{"tags":["City API"],"summary":"Update city by id","operationId":"updateCity","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int32"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CityRequestDto"}}},"required":true},"responses":{"409":{"description":"Conflicts, for example - element with this name already exists","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"400":{"description":"Bad request (validation exceptions)","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"404":{"description":"Not found, for example - element not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"200":{"description":"Successful update","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SuccessfullyOperationResponseDto"}}}}}},"delete":{"tags":["City API"],"summary":"Delete city by id","operationId":"deleteCity","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"200":{"description":"Successful deletion","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SuccessfullyOperationResponseDto"}}}}}}},"/api/locations/traffics":{"post":{"tags":["Traffic Jam API"],"summary":"Create new traffic jam","operationId":"addTrafficJam","parameters":[{"name":"streetId","in":"query","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrafficJamServletRequestDto"}}},"required":true},"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"400":{"description":"Bad request (validation exceptions)","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"201":{"description":"Successful creation","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SuccessfullyOperationResponseDto"}}}}}}},"/api/locations/streets":{"post":{"tags":["Street API"],"summary":"Create new street","operationId":"addStreet","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StreetRequestDto"}}},"required":true},"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"400":{"description":"Bad request (validation exceptions)","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"201":{"description":"Successful creation","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SuccessfullyOperationResponseDto"}}}}}}},"/api/locations/districts":{"post":{"tags":["District API"],"summary":"Create new district","operationId":"addDistrict","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DistrictRequestDto"}}},"required":true},"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"400":{"description":"Bad request (validation exceptions)","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"201":{"description":"Successful creation","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SuccessfullyOperationResponseDto"}}}}}}},"/api/locations/cities":{"get":{"tags":["City API"],"summary":"Get all cities","operationId":"getCities","responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"200":{"description":"List of cities","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CityResponseDto"}}}}}}},"post":{"tags":["City API"],"summary":"Create new city","operationId":"addCity","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CityRequestDto"}}},"required":true},"responses":{"409":{"description":"Conflicts, for example - element with name already exists","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"400":{"description":"Bad request (validation exceptions)","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"201":{"description":"Successful creation","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SuccessfullyOperationResponseDto"}}}}}}},"/api/locations/streets/{id}/traffics":{"get":{"tags":["Street API"],"summary":"Get all traffic jams for street","operationId":"getTrafficJamsForStreet","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"200":{"description":"List of traffic jams","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TrafficJamResponseDto"}}}}}}}},"/api/locations/districts/{id}/streets":{"get":{"tags":["District API"],"summary":"Get all streets for district","operationId":"getStreets","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"200":{"description":"List of streets","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StreetResponseDto"}}}}}}}},"/api/locations/cities/{id}/districts":{"get":{"tags":["City API"],"summary":"Get all districts for city","operationId":"getDistricts","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ExceptionResponseDto"}}}},"200":{"description":"List of districts","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CityResponseDto"}}}}}}}}},"components":{"schemas":{"ExceptionResponseDto":{"type":"object","properties":{"exception":{"type":"string","example":"NOT_FOUND"},"details":{"type":"string","example":"Element with name not found"},"trace":{"type":"array","items":{"$ref":"#/components/schemas/ValidationExceptionResponseDto"}}}},"ValidationExceptionResponseDto":{"type":"object","properties":{"message":{"type":"string"}}},"TrafficJamModifyRequestDto":{"type":"object","properties":{"status":{"type":"integer","format":"int32","maximum":10},"description":{"type":"string","maxLength":1000,"minLength":1}},"required":["description","status"]},"SuccessfullyOperationResponseDto":{"type":"object","properties":{"message":{"type":"string"},"_links":{"$ref":"#/components/schemas/Links"}},"required":["message"]},"StreetRequestDto":{"type":"object","properties":{"district_id":{"type":"integer","format":"int32","example":1},"name":{"type":"string","example":"Varshavskaya"}},"required":["district_id","name"]},"DistrictRequestDto":{"type":"object","properties":{"city_id":{"type":"integer","format":"int32","example":1},"name":{"type":"string","example":"Center"}},"required":["city_id","name"]},"CityRequestDto":{"type":"object","properties":{"name":{"type":"string"}},"required":["name"]},"TrafficJamServletRequestDto":{"type":"object","properties":{"status":{"type":"integer","format":"int32","maximum":10},"description":{"type":"string","maxLength":1000,"minLength":1},"user_id":{"type":"string","maxLength":100,"minLength":5},"date_time":{"type":"string","format":"date-time"}},"required":["date_time","description","status","user_id"]},"TrafficJamResponseDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid","example":"f7a2c920-6d9c-4e6b-9e68-4fc1e346a86d"},"street_id":{"type":"integer","format":"int32","example":1},"description":{"type":"string","example":"It`s terrible!"},"status":{"type":"integer","format":"int32","example":10},"date_time":{"type":"string","format":"date-time","example":"2025-04-17T14:30:00"},"user_id":{"type":"string","example":7237287},"_links":{"$ref":"#/components/schemas/Links"}},"required":["date_time","description","id","status","street_id","user_id"]},"StreetResponseDto":{"type":"object","properties":{"id":{"type":"integer","format":"int32","example":1},"name":{"type":"string","example":"Varshavskaya"},"_links":{"$ref":"#/components/schemas/Links"}}},"CityResponseDto":{"type":"object","properties":{"id":{"type":"integer","format":"int32"},"name":{"type":"string"},"_links":{"$ref":"#/components/schemas/Links"}}},"Link":{"type":"object","properties":{"href":{"type":"string"},"hreflang":{"type":"string"},"title":{"type":"string"},"type":{"type":"string"},"deprecation":{"type":"string"},"profile":{"type":"string"},"name":{"type":"string"},"templated":{"type":"boolean"}}},"Links":{"type":"object","additionalProperties":{"$ref":"#/components/schemas/Link"}}}}}